The tests in `tests/test_core.py` all use a testing harness that mocks the Google Drive and Google Sheets APIs. These utilize the google-api-python-client library's `apiclient.http.RequestMockBuilder` and `apiclient.http.HttpMock` classes in the following way:

* The Google Drive and Google Sheets discovery resources define the high-level schema for each service: which endpoints exist, what fields they take, and how those fields are expected to be configured. These are direct copies of the actual discovery resources pulled from the Google API in November 2016 using code listed at the top of `tests/conftest.py`. These resources are mocked using `apiclient.http.HttpMock` within the fixtures `drive_http` and `sheets_http`, which are used in the `mock_client` fixture. These discovery resources are unlikely to require modifications until a new version of of the APIs comes out and gsheets switches to it.

* All requests made to the mocked endpoints and all responses sent from them are configured using `apiclient.http.HttpMock`. These are configured on a test-by-test basis by passing the test a path to a `tests/mock_responses/` file using the `@yaml_resource` decorator. This moves into the `mock_client` fixture through the pytest `request` object and then further upstream from there, ultimately passing to the `build_path` fixture. Upon test execution, the `apiclient.http.HttpMock` instance sends a mocked response back from the given endpoint. Typically (but not always) it also verifies that the request matches what would be expected by this endpoint.
